{"version":3,"sources":["Sidebar.js","Projection.js","About.js","Content.js","Imprint.js","Privacy.js","Layout.js","Data.js","App.js","serviceWorker.js","index.js"],"names":["GenerateTable","label","description_stack","color_array_stack","description_array","Array","push","i","description","length","ranges","clustercount","table","document","createElement","border","columnCount","row","insertRow","headerCell","innerHTML","appendChild","j","cell","insertCell","bg_image_text","style","backgroundColor","j_in","backgroundImage","rows","cells","width","dvTable","getElementById","Sidebar","this","props","setSidebarCanvas","side_canvas","handleSelectAlgorithm","bind","handleSelectLabel","label_choice","e","v","target","value","selectAlgorithm","selectLabel","label_options","indexOf","_this","_this$props","sidebar_orientation","sidebar_image_size_width","sidebar_image_size_height","grem","p","hover_index","label_stack","algorithm_options","algorithm_choice","react_default","a","display","flexDirection","justifyContent","flexGrow","padding","alignItems","onChange","map","option","index","key","ref","height","background","concat","join","color","transition","id","onClick","toggleAbout","toggleImprint","togglePrivacy","Component","tile_string","Projection","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleResize","camera","aspect","updateProjectionMatrix","renderer","setSize","current_scale","getScaleFromZ","position","z","d3_x","x","d3_y","y","resize_transform","d3","translate","scale","view","mount","d3_zoom","transform","state","init","assertThisInitialized","addPoints","setUpCamera","animate","getZFromScale","changeEmbeddings","changeLabels","tile_locations","toConsumableArray","sprite_number","n","process","_images","src","img","scale1","domain","range","zoom_min","zoom_mid","clamp","scale2","zoom_max","prev_choice","new_choice","_this2","start","sprite_size","end","embedding_chunks","embedding_stack","slice","_loop","c","echunk","points","scene","children","numVertices","geometry","attributes","array","Float32Array","l","tween","TWEEN","to","easing","Linear","None","onUpdate","THREE","needsUpdate","computeBoundingSphere","_this3","color_array","label_chunks","_loop2","lchunk","color_o","colors","rvFOV","degToRad","fov","Math","tan","camera_z_position","fov_height","_this4","d3_transform","k","set","input","new_size","point_group","material","uniforms","size","camera_z_start","embeddings","vFOV","xs","min_x","_","max_x","ys","min_y","max_y","max_x_from_center","m","abs","max_y_from_center","far","max","scaleExtent","on","zoomHandler","initial_scale","initial_transform","_this$props2","labels","loader","textures","t","load","flipY","magFilter","vertices","embedding","vert","positions","offsets","addAttribute","texture_subsize_x","sprite_side_x","texture_subsize_y","sprite_side_y","sprite_image_width","sprite_actual_size","floor","sprite_image_height","point_size","texture","repeat","fragment_shader","colored_images","vertexShader","fragmentShader","point_cloud","userData","sprite_index","add","hover_container","hoover_size","transparent","point","frustumCulled","visible","digit_index","full_index","copyVector3sArray","offset","highlight_container","highlights","remove","apply","mouse_position","_this$props3","sidebar_ctx","mouse_vector","_ref","_ref2","slicedToArray","mouseX","mouseY","mouseToThree","raycaster","setFromCamera","params","Points","threshold","intersects","intersectObjects","intersect","sortIntersectsByDistanceToRay","object","setHoverIndex","highlightPoint","fillRect","drawImage","_this5","domElement","_d3$mouse","node","_d3$mouse2","checkIntersects","_this$props4","setClearColor","addBlankHighlightPoints","handleMouse","requestAnimationFrame","render","prevProps","_this$props5","removeChild","_this6","_this$props6","overflow","About","left","top","right","bottom","paddingTop","overflowY","fontSize","lineHeight","className","textAlign","cursor","textDecoration","maxWidth","margin","dist_default","Imprint","Privacy","tb","lr","Layout","ww","wh","sidebar_height","show_about","show_imprint","show_privacy","color_description_choice","checkHash","selectColorDescription","setState","window","innerWidth","innerHeight","sidebar_mount","offsetHeight","imageSmoothingEnabled","canvas","ctx","getContext","history","pushState","location","pathname","hash","addEventListener","removeEventListener","sprite_side","sprite_image_size","sprite_ratio","_this$state","sidebar_style","main_style","font_size","objectSpread","scaler","general_style","src_Sidebar","src_Projection","src_About","src_Imprint","src_Privacy","_callee","jsondata","object_return","regenerator_default","wrap","_context","prev","next","fetch","then","res","json","temp","embedding_names","label_names","embedding_number","label_number","abrupt","stop","Data","Promise","resolve","loadParams","object_return_val","response","scaled_embeddings","scaleEmbeddings","embedding_stack_local","algorithm_options_local","name","String","label_stack_local","color_array_stack_local","_loop3","description_stack_local","label_options_local","_loop4","console","log","src_Layout","App","src_Data","Boolean","hostname","match","ReactDOM","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5b60fa3e.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport Parser from 'html-react-parser';\r\nfunction GenerateTable(label, description_stack, color_array_stack) {\r\n  //Build an array containing Customer records.\r\n  var description_array = new Array();\r\n  description_array.push([\"Range\", \"Description\", \"Cluster Count\"]);\r\n  for (var i = 0; i < description_stack[label].description.length; i++) {\r\n    description_array.push([description_stack[label].ranges[i][0] + ':' + description_stack[label].ranges[i][1],\r\n                            description_stack[label].description[i],\r\n                            description_stack[label].clustercount[i]]);\r\n  }\r\n\r\n  //Create a HTML Table element.\r\n  var table = document.createElement(\"TABLE\");\r\n  table.border = \"1\";\r\n  \r\n\r\n  //Get the count of columns.\r\n  var columnCount = description_array[0].length;\r\n\r\n  //Add the header row.\r\n  var row = table.insertRow(-1);\r\n  for (var i = 0; i < columnCount; i++) {\r\n      var headerCell = document.createElement(\"TH\");\r\n      headerCell.innerHTML = description_array[0][i];\r\n      row.appendChild(headerCell);\r\n  }\r\n\r\n  //Add the data rows.\r\n  for (var i = 1; i < description_array.length; i++) {\r\n      row = table.insertRow(-1);\r\n      for (var j = 0; j < columnCount; j++) {\r\n          var cell = row.insertCell(-1);\r\n          cell.innerHTML = description_array[i][j];\r\n          if (j==0){\r\n            \r\n            if (description_stack[label].ranges[i-1][0]==description_stack[label].ranges[i-1][1]){\r\n              bg_image_text = 'rgba('+color_array_stack[label][description_stack[label].ranges[i-1][0]]+')';\r\n              cell.style.backgroundColor = bg_image_text;\r\n            }\r\n            else{\r\n              var bg_image_text = 'linear-gradient(to right';\r\n              for (var j_in = description_stack[label].ranges[i-1][0]; j_in <= description_stack[label].ranges[i-1][1]; j_in++) {\r\n                bg_image_text = bg_image_text +', rgba('+color_array_stack[label][j_in]+')';\r\n              }\r\n              bg_image_text = bg_image_text+')';\r\n              cell.style.backgroundImage = bg_image_text;\r\n            }\r\n            \r\n            \r\n          }\r\n      }\r\n  }\r\n  table.rows[0].cells[0].width= '100px';\r\n  var dvTable = document.getElementById(\"dvTable\");\r\n  dvTable.innerHTML = \"\";\r\n  dvTable.appendChild(table);\r\n}\r\n\r\nclass Sidebar extends Component {\r\n  componentDidMount() {\r\n    this.props.setSidebarCanvas(this.side_canvas)\r\n    this.handleSelectAlgorithm = this.handleSelectAlgorithm.bind(this)\r\n    this.handleSelectLabel = this.handleSelectLabel.bind(this)\r\n    GenerateTable(this.props.label_choice, this.props.description_stack, this.props.color_array_stack)\r\n  }\r\n\r\n  handleSelectAlgorithm(e) {\r\n    let v = e.target.value\r\n    this.props.selectAlgorithm(v)\r\n  }\r\n\r\n  handleSelectLabel(e) {\r\n    let v = e.target.value\r\n    this.props.selectLabel(v)\r\n    let i = this.props.label_options.indexOf(v)\r\n    GenerateTable(i,this.props.description_stack,this.props.color_array_stack)\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      sidebar_orientation,\r\n      sidebar_image_size_width,\r\n      sidebar_image_size_height,\r\n      grem,\r\n      p,\r\n      hover_index,\r\n      label_stack,\r\n      color_array_stack,\r\n      description_stack,\r\n      algorithm_options,\r\n      algorithm_choice,\r\n      label_options,\r\n      label_choice,\r\n    } = this.props\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'space-between',\r\n          flexGrow: 1,\r\n        }}\r\n      >\r\n        <div>\r\n          {' '}\r\n          <div\r\n            style={{\r\n              padding: grem / 2,\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <div>Algorithm:</div>\r\n            <select\r\n              onChange={this.handleSelectAlgorithm}\r\n              value={algorithm_options[algorithm_choice]}\r\n            >\r\n              {algorithm_options.map((option, index) => (\r\n                <option key={option} value={option}>\r\n                  {option}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div\r\n            style={{\r\n              padding: grem / 2,\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <div>Label:</div>\r\n            <select\r\n              onChange={this.handleSelectLabel}\r\n              value={label_options[label_choice]}\r\n            >\r\n              {label_options.map((option, index) => (\r\n                <option key={option} value={option}>\r\n                  {option}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              flexDirection:\r\n                sidebar_orientation === 'horizontal' ? 'row' : 'column',\r\n            }}\r\n          >\r\n            <div>\r\n              <canvas\r\n                ref={side_canvas => {\r\n                  this.side_canvas = side_canvas\r\n                }}\r\n                width={sidebar_image_size_width}\r\n                height={sidebar_image_size_height}\r\n              />\r\n            </div>\r\n            <div style={{ flexGrow: 1 }}>\r\n              <div\r\n                style={{\r\n                  background: hover_index\r\n                    ? `rgb(${color_array_stack[label_choice][label_stack[label_choice][hover_index]].join(',')})`\r\n                    : 'transparent',\r\n                  color: hover_index ? '#000' : '#fff',\r\n                  padding: p(grem / 4, grem / 2),\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  transition: 'all 0.1s linear',\r\n                }}\r\n              >\r\n                <div>Label:</div>\r\n                {hover_index ? <div>{label_stack[label_choice][hover_index]}</div> : null}\r\n              </div>\r\n              <div\r\n                style={{\r\n                  padding: p(grem / 4, grem / 2),\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                }}\r\n              >\r\n                Index:\r\n                {hover_index ? <div>{hover_index}</div> : null}\r\n              </div>\r\n              <div id=\"dvTable\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{ padding: grem / 2 }}>\r\n          <div>\r\n          An interactive latent space visualization of the temporal evolvement of error signal (red=error in x-position,    green=error in y-position).{' '}\r\n            <button\r\n              onClick={() => {\r\n                this.props.toggleAbout(true)\r\n              }}\r\n            >\r\n              About\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <button\r\n              onClick={() => {\r\n                this.props.toggleImprint(true)\r\n              }}\r\n            >\r\n              Impressum\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <button\r\n              onClick={() => {\r\n                this.props.togglePrivacy(true)\r\n              }}\r\n            >\r\n              Datenschutzerkl√§rung\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { Component } from 'react'\r\nimport * as THREE from 'three'\r\nimport * as _ from 'lodash'\r\nimport * as d3 from 'd3'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\n\r\nlet tile_string = 'tile_image_'\r\n\r\nclass Projection extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {}\r\n    this.init = this.init.bind(this)\r\n    this.addPoints = this.addPoints.bind(this)\r\n    this.handleResize = this.handleResize.bind(this)\r\n    this.setUpCamera = this.setUpCamera.bind(this)\r\n    this.animate = this.animate.bind(this)\r\n    this.getScaleFromZ = this.getScaleFromZ.bind(this)\r\n    this.getZFromScale = this.getZFromScale.bind(this)\r\n    this.changeEmbeddings = this.changeEmbeddings.bind(this)\r\n    this.changeLabels = this.changeLabels.bind(this)\r\n    this.tile_locations = [...Array(this.props.sprite_number)].map(\r\n      (n, i) => `${process.env.PUBLIC_URL}/${tile_string}${i}.png`\r\n    )\r\n    this._images = this.tile_locations.map(src => {\r\n      let img = document.createElement('img')\r\n      img.src = src\r\n      return img\r\n    })\r\n    this.scale1 = d3\r\n      .scaleLinear()\r\n      .domain([20, 3])\r\n      .range([this.props.zoom_min, this.props.zoom_mid])\r\n      .clamp(true)\r\n    this.scale2 = d3\r\n      .scaleLinear()\r\n      .domain([3, 0])\r\n      .range([this.props.zoom_mid, this.props.zoom_max])\r\n  }\r\n\r\n  changeEmbeddings(prev_choice, new_choice) {\r\n    // assumes mnist embeddings has been updated\r\n    let ranges = []\r\n    for (let i = 0; i < this.props.sprite_number; i++) {\r\n      let start = i * this.props.sprite_size\r\n      let end = (i + 1) * this.props.sprite_size\r\n      if (i === this.props.sprite_number - 1) end = this.props.sprite_number * this.props.sprite_size\r\n      ranges.push([start, end])\r\n    }\r\n\r\n    let embedding_chunks = ranges.map(range =>\r\n      this.props.embedding_stack[new_choice].slice(\r\n        range[0],\r\n        range[1]\r\n      )\r\n    )\r\n\r\n    for (let c = 0; c < this.props.sprite_number; c++) {\r\n      let echunk = embedding_chunks[c]\r\n\r\n      let points = this.scene.children[0].children[c]\r\n      let numVertices = echunk.length\r\n      let position = points.geometry.attributes.position.array\r\n      let target = new Float32Array(numVertices * 3)\r\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 3) {\r\n        let x = echunk[i][0]\r\n        let y = echunk[i][1]\r\n        let z = 0\r\n        target[index] = x\r\n        target[index + 1] = y\r\n        target[index + 2] = z\r\n      }\r\n\r\n\r\n      let tween = new TWEEN.Tween(position)\r\n        .to(target, 1000)\r\n        .easing(TWEEN.Easing.Linear.None)\r\n      tween.onUpdate(function() {\r\n        points.geometry.attributes.position = new THREE.BufferAttribute(\r\n          position,\r\n          3\r\n        )\r\n        points.geometry.attributes.position.needsUpdate = true // required after the first render\r\n        points.geometry.computeBoundingSphere()\r\n      })\r\n      tween.start()\r\n    }\r\n\r\n  }\r\n\r\n  changeLabels(new_choice) {\r\n    // assumes mnist embeddings has been updated\r\n    let color_array = this.props.color_array_stack[new_choice]\r\n    let ranges = []\r\n    for (let i = 0; i < this.props.sprite_number; i++) {\r\n      let start = i * this.props.sprite_size\r\n      let end = (i + 1) * this.props.sprite_size\r\n      if (i === this.props.sprite_number - 1) end = this.props.sprite_number * this.props.sprite_size\r\n      ranges.push([start, end])\r\n    }\r\n\r\n    let label_chunks = ranges.map(range =>\r\n      this.props.label_stack[new_choice].slice(\r\n        range[0],\r\n        range[1]\r\n      )\r\n    )\r\n\r\n    for (let c = 0; c < this.props.sprite_number; c++) {\r\n      let points = this.scene.children[0].children[c]\r\n      let lchunk = label_chunks[c]\r\n      let numVertices = lchunk.length\r\n      let color_o = points.geometry.attributes.color.array\r\n      let colors = new Float32Array(numVertices * 3)\r\n\r\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 3) {\r\n        let color = color_array[lchunk[i]]\r\n        colors[index] = color[0] / 255\r\n        colors[index + 1] = color[1] / 255\r\n        colors[index + 2] = color[2] / 255\r\n      }\r\n\r\n      let tween = new TWEEN.Tween(color_o)\r\n        .to(colors, 1000)\r\n        .easing(TWEEN.Easing.Linear.None)\r\n      tween.onUpdate(function() {\r\n        points.geometry.attributes.color = new THREE.BufferAttribute(color_o, 3)\r\n        points.geometry.attributes.color.needsUpdate = true // required after the first render\r\n        points.geometry.computeBoundingSphere()\r\n      })\r\n      tween.start()\r\n    }\r\n  }\r\n\r\n  getZFromScale(scale) {\r\n    let rvFOV = THREE.Math.degToRad(this.camera.fov)\r\n    let scale_height = this.props.height / scale\r\n    let camera_z_position = scale_height / (2 * Math.tan(rvFOV / 2))\r\n    return camera_z_position\r\n  }\r\n\r\n  getScaleFromZ(camera_z_position) {\r\n    let rvFOV = THREE.Math.degToRad(this.camera.fov)\r\n    let half_fov_height = Math.tan(rvFOV / 2) * camera_z_position\r\n    let fov_height = half_fov_height * 2\r\n    let scale = this.props.height / fov_height\r\n    return scale\r\n  }\r\n\r\n  handleResize = (width, height) => {\r\n    this.camera.aspect = width / height\r\n    this.camera.updateProjectionMatrix()\r\n    this.renderer.setSize(width, height)\r\n    let current_scale = this.getScaleFromZ(this.camera.position.z)\r\n    let d3_x = -(this.camera.position.x * current_scale) + this.props.width / 2\r\n    let d3_y = this.camera.position.y * current_scale + this.props.height / 2\r\n    var resize_transform = d3.zoomIdentity\r\n      .translate(d3_x, d3_y)\r\n      .scale(current_scale)\r\n    let view = d3.select(this.mount)\r\n    this.d3_zoom.transform(view, resize_transform)\r\n  }\r\n\r\n  zoomHandler() {\r\n    let d3_transform = d3.event.transform\r\n\r\n    let scale = d3_transform.k\r\n    let x = -(d3_transform.x - this.props.width / 2) / scale\r\n    let y = (d3_transform.y - this.props.height / 2) / scale\r\n    let z = this.getZFromScale(scale)\r\n\r\n    this.camera.position.set(x, y, z)\r\n\r\n    // point size scales at end of zoom\r\n\r\n    let zoomScaler = input => {\r\n      if (input >= 3) {\r\n        return this.scale1(input)\r\n      } else  {\r\n        return this.scale2(input)\r\n      }\r\n    }\r\n    let new_size = zoomScaler(z)\r\n    let point_group = this.scene.children[0].children\r\n    for (let c = 0; c < point_group.length; c++) {\r\n      point_group[c].material.uniforms.size.value = new_size\r\n    }\r\n  }\r\n\r\n  setUpCamera() {\r\n    let { width, height, embeddings } = this.props\r\n\r\n    let aspect = this.camera.aspect\r\n    let vFOV = this.camera.fov\r\n    let rvFOV = THREE.Math.degToRad(vFOV)\r\n\r\n    let xs = embeddings.map(e => e[0])\r\n    let min_x = _.min(xs)\r\n    let max_x = _.max(xs)\r\n    let ys = embeddings.map(e => e[1])\r\n    let min_y = _.min(ys)\r\n    let max_y = _.max(ys)\r\n    let data_width = max_x - min_x\r\n    let data_height = max_y - min_y\r\n    let data_aspect = data_width / data_height\r\n\r\n    let max_x_from_center = _.max([min_x, max_x].map(m => Math.abs(m)))\r\n    let max_y_from_center = _.max([min_y, max_y].map(m => Math.abs(m)))\r\n\r\n    let max_center = Math.max(max_x_from_center, max_y_from_center)\r\n\r\n    let camera_z_start\r\n    if (data_aspect > aspect) {\r\n      // console.log(\"width is limiter\");\r\n      // camera_z_start = max_x_from_center / Math.tan(rvFOV / 2) / aspect\r\n    } else {\r\n      // console.log(\"height is limiter\");\r\n      // camera_z_start = max_y_from_center / Math.tan(rvFOV / 2)\r\n    }\r\n\r\n    camera_z_start = max_center / Math.tan(rvFOV / 2)\r\n\r\n    let far = camera_z_start * 1.25\r\n    this.camera.far = far\r\n    this.camera.position.z = camera_z_start * 1.1\r\n\r\n    // set up zoom\r\n    this.d3_zoom = d3\r\n      .zoom()\r\n      .scaleExtent([this.getScaleFromZ(far - 1), this.getScaleFromZ(0.1)])\r\n      .on('zoom', this.zoomHandler.bind(this))\r\n\r\n    let view = d3.select(this.mount)\r\n    this.view = view\r\n    view.call(this.d3_zoom)\r\n    let initial_scale = this.getScaleFromZ(this.camera.position.z)\r\n    var initial_transform = d3.zoomIdentity\r\n      .translate(width / 2, height / 2)\r\n      .scale(initial_scale)\r\n    this.d3_zoom.transform(view, initial_transform)\r\n  }\r\n\r\n  addPoints() {\r\n    let { embeddings, labels, color_array } = this.props\r\n    \r\n\r\n    // split embeddings and labels into chunks to match sprites\r\n    let ranges = []\r\n    for (let i = 0; i < this.props.sprite_number; i++) {\r\n      let start = i * this.props.sprite_size\r\n      let end = (i + 1) * this.props.sprite_size\r\n      if (i === this.props.sprite_number - 1) end = this.props.sprite_number * this.props.sprite_size\r\n      ranges.push([start, end])\r\n    }\r\n    let embedding_chunks = ranges.map(range =>\r\n      embeddings.slice(range[0], range[1])\r\n    )\r\n    let label_chunks = ranges.map(range =>\r\n      labels.slice(range[0], range[1])\r\n    )\r\n\r\n    // load the textures\r\n    let loader = new THREE.TextureLoader()\r\n    this.textures = this.tile_locations.map(l => {\r\n      let t = loader.load(l)\r\n      t.flipY = false\r\n      t.magFilter = THREE.NearestFilter\r\n      // t.minFilter = THREE.LinearMipMapLinearFilter;\r\n      return t\r\n    })\r\n\r\n    let point_group = new THREE.Group()\r\n    for (let c = 0; c < this.props.sprite_number; c++) {\r\n      let echunk = embedding_chunks[c]\r\n      let lchunk = label_chunks[c]\r\n\r\n      let vertices = []\r\n      for (let v = 0; v < echunk.length; v++) {\r\n        let embedding = echunk[v]\r\n        let vert = new THREE.Vector3(embedding[0], embedding[1], 0)\r\n        vertices[v] = vert\r\n      }\r\n\r\n      let geometry = new THREE.BufferGeometry()\r\n\r\n      let numVertices = vertices.length\r\n      let positions = new Float32Array(numVertices * 3)\r\n      let offsets = new Float32Array(numVertices * 2)\r\n      let colors = new Float32Array(numVertices * 3)\r\n      geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3))\r\n      geometry.addAttribute('offset', new THREE.BufferAttribute(offsets, 2))\r\n      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3))\r\n\r\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 3) {\r\n        let x = echunk[i][0]\r\n        let y = echunk[i][1]\r\n        let z = 0\r\n        positions[index] = x\r\n        positions[index + 1] = y\r\n        positions[index + 2] = z\r\n      }\r\n\r\n      // geometry.attributes.position.copyVector3sArray(vertices)\r\n\r\n      let texture_subsize_x = 1 / this.props.sprite_side_x\r\n      let texture_subsize_y = 1 / this.props.sprite_side_y\r\n\r\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 2) {\r\n        let x = ((i % this.props.sprite_side_x) * this.props.sprite_image_width) / this.props.sprite_actual_size\r\n        let y =\r\n          (Math.floor(i / this.props.sprite_side_x) * this.props.sprite_image_height) / this.props.sprite_actual_size\r\n        offsets[index] = x\r\n        offsets[index + 1] = y\r\n      }\r\n\r\n      \r\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 3) {\r\n        let color = color_array[lchunk[i]]\r\n        colors[index] = color[0] / 255\r\n        colors[index + 1] = color[1] / 255\r\n        colors[index + 2] = color[2] / 255\r\n      }\r\n      let point_size = Math.max(this.props.sprite_image_width,this.props.sprite_image_height)\r\n      // uniforms\r\n      let uniforms = {\r\n        texture: { value: this.textures[c] },\r\n        repeat: { value: new THREE.Vector2(texture_subsize_x, texture_subsize_y) },\r\n        size: { value:  point_size},\r\n        height: {value: this.props.sprite_image_height},\r\n        width: {value: this.props.sprite_image_width},\r\n      }\r\n\r\n      let vertex_shader = `\r\n        attribute vec2 offset;\r\n        varying vec2 vOffset;\r\n        attribute vec3 color;\r\n        varying vec3 vColor;\r\n        uniform float size;\r\n        void main() {\r\n          vOffset = offset;\r\n          vColor = color;\r\n          gl_PointSize = size;\r\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n        }`\r\n      let fragment_shader\r\n      if (this.props.colored_images == 0){\r\n        fragment_shader = `\r\n          uniform sampler2D texture;\r\n          uniform vec2 repeat;\r\n          uniform float height;\r\n          uniform float width;\r\n          varying vec2 vOffset;\r\n          varying vec3 vColor;\r\n          void main() {\r\n            if (width>height){\r\n              float height_rel = height/width;\r\n              float start_rel = (width-height)/(2.0*width);\r\n              float end_rel = start_rel+height_rel;\r\n              if (gl_PointCoord.y>=start_rel && gl_PointCoord.y<=end_rel) {\r\n                float y_new = ((gl_PointCoord.y-start_rel)/height_rel);\r\n                vec2 uv = vec2( gl_PointCoord.x, y_new );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                if ( tex.r < 0.05 ) discard;\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex * vec4(vColor, 1.0);\r\n              } else {\r\n                discard;\r\n              }\r\n            } else if (width<height) {\r\n              float width_rel = width/height;\r\n              float start_rel = (height-width)/(2.0*height);\r\n              float end_rel = start_rel+width_rel;\r\n              if (gl_PointCoord.x>=start_rel && gl_PointCoord.x<=end_rel) {\r\n                float x_new = ((gl_PointCoord.x-start_rel)/width_rel);\r\n                vec2 uv = vec2( x_new,gl_PointCoord.y );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                if ( tex.r < 0.05 ) discard;\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex * vec4(vColor, 1.0);\r\n              } else {\r\n                discard;\r\n              }\r\n            } else {\r\n              vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              if ( tex.r < 0.5) discard;\r\n              tex.r = 1.0;\r\n              tex.g = 1.0;\r\n              tex.b = 1.0;\r\n              gl_FragColor = tex * vec4(vColor, 1.0); \r\n            }\r\n          }`\r\n      } else if (this.props.colored_images == -1) {\r\n        // Use labels or the clustering result to color the embeddings \r\n        // However the zoom window of a single embedding still displays the object pair lidar=red, camera=green, and both=yellow\r\n        fragment_shader = `\r\n          uniform sampler2D texture;\r\n          uniform vec2 repeat;\r\n          uniform float height;\r\n          uniform float width;\r\n          varying vec2 vOffset;\r\n          varying vec3 vColor;\r\n          void main() {\r\n            if (width>height){\r\n              float height_rel = height/width;\r\n              float start_rel = (width-height)/(2.0*width);\r\n              float end_rel = start_rel+height_rel;\r\n              if (gl_PointCoord.y>=start_rel && gl_PointCoord.y<=end_rel) {\r\n                float y_new = ((gl_PointCoord.y-start_rel)/height_rel);\r\n                vec2 uv = vec2( gl_PointCoord.x, y_new );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                // THIS Part covers the colors\r\n                if (tex.r < 0.05 && tex.g < 0.05 && tex.b < 0.05) discard;\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex * vec4(vColor, 1.0);\r\n              } else {\r\n                discard;\r\n              }\r\n            } else if (width<height) {\r\n              float width_rel = width/height;\r\n              float start_rel = (height-width)/(2.0*height);\r\n              float end_rel = start_rel+width_rel;\r\n              if (gl_PointCoord.x>=start_rel && gl_PointCoord.x<=end_rel) {\r\n                float x_new = ((gl_PointCoord.x-start_rel)/width_rel);\r\n                vec2 uv = vec2( x_new,gl_PointCoord.y );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                if ( tex.r < 0.05 ) discard;\r\n                // tex.r = 1.0;\r\n                // tex.g = 1.0;\r\n                // tex.b = 1.0;\r\n                // gl_FragColor = tex * vec4(vColor, 1.0);\r\n              } else {\r\n                discard;\r\n              }\r\n            } else {\r\n              vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              if ( tex.b < 0.5 && tex.r==0.0 && tex.g==0.0) discard;\r\n              if (tex.r> 0.0 && tex.g>0.0 && tex.b>0.0) discard;\r\n\r\n              tex.r = 1.0;\r\n              tex.g = 1.0;\r\n              tex.b = 1.0;\r\n              gl_FragColor = tex * vec4(vColor, 1.0); \r\n\r\n              // if (tex.r>0.0){\r\n              //   tex.r = 1.0;\r\n              //   tex.g = 1.0;\r\n              //   tex.b = 1.0;\r\n              //   gl_FragColor = tex * vec4(vColor, 1.0); \r\n              // }\r\n              // else{\r\n              //   tex.r = 1.0;\r\n              //   tex.g = 1.0;\r\n              //   tex.b = 1.0;\r\n              //   gl_FragColor = tex * vec4(vColor, 1.0); \r\n              // }\r\n            }\r\n          }`\r\n      } else if (this.props.colored_images == 2) {\r\n        // The embeddings are colored in the fashion that lidar=red, camera=green, and both=yellow (labels don't color the images here)\r\n        fragment_shader = `\r\n          uniform sampler2D texture;\r\n          uniform vec2 repeat;\r\n          uniform float height;\r\n          uniform float width;\r\n          varying vec2 vOffset;\r\n          varying vec3 vColor;\r\n          void main() {\r\n            if (width>height){\r\n              float height_rel = height/width;\r\n              float start_rel = (width-height)/(2.0*width);\r\n              float end_rel = start_rel+height_rel;\r\n              if (gl_PointCoord.y>=start_rel && gl_PointCoord.y<=end_rel) {\r\n                // THIS is the relevant part to change the color scheme\r\n                float y_new = ((gl_PointCoord.y-start_rel)/height_rel);\r\n                vec2 uv = vec2( gl_PointCoord.x, y_new );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                // if ( tex.r < 0.05 ) discard;\r\n                if ( tex.b==0.0 && tex.r==0.0 && tex.g==.0) discard;\r\n                // tex.r = 1.0;\r\n                // tex.g = 1.0;\r\n                // tex.b = 1.0;\r\n                // gl_FragColor = tex * vec4(vColor, 1.0);\r\n                gl_FragColor = tex;\r\n              } else {\r\n                discard;\r\n              }\r\n            } else if (width<height) {\r\n              float width_rel = width/height;\r\n              float start_rel = (height-width)/(2.0*height);\r\n              float end_rel = start_rel+width_rel;\r\n              if (gl_PointCoord.x>=start_rel && gl_PointCoord.x<=end_rel) {\r\n                float x_new = ((gl_PointCoord.x-start_rel)/width_rel);\r\n                vec2 uv = vec2( x_new,gl_PointCoord.y );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                if ( tex.r < 0.05 && tex.g < 0.05 && tex.b < 0.05 ) discard;\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex * vec4(vColor, 1.0);\r\n              } else {\r\n                discard;\r\n              }\r\n            } else {\r\n              vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              if (tex.b < 0.5 && tex.r==0.0 && tex.g==0.0 && tex.b==0.0) discard;\r\n              if (tex.r>0.0){\r\n                tex.r = tex.r;\r\n                tex.g = tex.g;\r\n                tex.b = 0.0;\r\n                gl_FragColor = tex; \r\n              }\r\n              else{\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex * vec4(vColor, 1.0); \r\n              }\r\n            }\r\n          }`\r\n      } else {\r\n        fragment_shader = `\r\n        uniform sampler2D texture;\r\n        uniform vec2 repeat;\r\n        uniform float height;\r\n        uniform float width;\r\n        varying vec2 vOffset;\r\n        varying vec3 vColor;\r\n        void main() {\r\n          if (width>height){\r\n            float height_rel = height/width;\r\n            float start_rel = (width-height)/(2.0*width);\r\n            float end_rel = start_rel+height_rel;\r\n            if (gl_PointCoord.y>=start_rel && gl_PointCoord.y<=end_rel) {\r\n              float y_new = ((gl_PointCoord.y-start_rel)/height_rel);\r\n              vec2 uv = vec2( gl_PointCoord.x, y_new );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              gl_FragColor = tex;\r\n            } else {\r\n              discard;\r\n            }\r\n          } else if (width<height) {\r\n            float width_rel = width/height;\r\n            float start_rel = (height-width)/(2.0*height);\r\n            float end_rel = start_rel+width_rel;\r\n            if (gl_PointCoord.x>=start_rel && gl_PointCoord.x<=end_rel) {\r\n              float x_new = ((gl_PointCoord.x-start_rel)/width_rel);\r\n              vec2 uv = vec2( x_new, gl_PointCoord.y );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              gl_FragColor = tex;\r\n            } else {\r\n              discard;\r\n            }\r\n          } else {\r\n            vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\r\n            vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n            gl_FragColor = tex;\r\n          }\r\n        }`\r\n      }\r\n\r\n      // material\r\n      let material = new THREE.ShaderMaterial({\r\n        uniforms: uniforms,\r\n        vertexShader: vertex_shader,\r\n        fragmentShader: fragment_shader,\r\n      })\r\n\r\n      // point cloud\r\n      let point_cloud = new THREE.Points(geometry, material)\r\n      point_cloud.userData = { sprite_index: c }\r\n\r\n      point_group.add(point_cloud)\r\n    }\r\n\r\n    this.scene.add(point_group)\r\n  }\r\n\r\n  addBlankHighlightPoints() {\r\n    let hover_container = new THREE.Group()\r\n    this.scene.add(hover_container)\r\n\r\n    let vert = new THREE.Vector3(0, 0, 0)\r\n    let vertices = [vert]\r\n    let geometry = new THREE.BufferGeometry()\r\n    let numVertices = vertices.length\r\n    var positions = new Float32Array(numVertices * 3) // 3 coordinates per point\r\n    var offsets = new Float32Array(numVertices * 2) // 2 coordinates per point\r\n    geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3))\r\n    geometry.addAttribute('offset', new THREE.BufferAttribute(offsets, 2))\r\n\r\n    // all the attributes will be filled on hover\r\n    let texture_subsize_x = 1 / this.props.sprite_side_x\r\n    let texture_subsize_y = 1 / this.props.sprite_side_y\r\n\r\n    let point_size = this.props.hoover_size//Math.max(this.props.sprite_image_width,this.props.sprite_image_height)\r\n    // uniforms\r\n    let uniforms = {\r\n      texture: { value: this.textures[0] },\r\n      repeat: { value: new THREE.Vector2(texture_subsize_x, texture_subsize_y) },\r\n      size: { value:  point_size},\r\n      height: {value: this.props.sprite_image_height},\r\n      width: {value: this.props.sprite_image_width},\r\n    }\r\n\r\n    let vertex_shader = `\r\n        attribute vec2 offset;\r\n        varying vec2 vOffset;\r\n        uniform float size;\r\n        void main() {\r\n          vOffset = offset;\r\n          gl_PointSize = size;\r\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n        }`\r\n\r\n      let fragment_shader\r\n      if (this.props.colored_images == 0){\r\n        fragment_shader = `\r\n          uniform sampler2D texture;\r\n          uniform vec2 repeat;\r\n          uniform float height;\r\n          uniform float width;\r\n          varying vec2 vOffset;\r\n          varying vec3 vColor;\r\n          void main() {\r\n            if (width>height){\r\n              float height_rel = height/width;\r\n              float start_rel = (width-height)/(2.0*width);\r\n              float end_rel = start_rel+height_rel;\r\n              if (gl_PointCoord.y>=start_rel && gl_PointCoord.y<=end_rel) {\r\n                float y_new = ((gl_PointCoord.y-start_rel)/height_rel);\r\n                vec2 uv = vec2( gl_PointCoord.x, y_new );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                tex.a = 1.0;\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex;\r\n              } else {\r\n                discard;\r\n              }\r\n            } else if (width<height) {\r\n              float width_rel = width/height;\r\n              float start_rel = (height-width)/(2.0*height);\r\n              float end_rel = start_rel+width_rel;\r\n              if (gl_PointCoord.x>=start_rel && gl_PointCoord.x<=end_rel) {\r\n                float x_new = ((gl_PointCoord.x-start_rel)/width_rel);\r\n                vec2 uv = vec2( x_new,gl_PointCoord.y );\r\n                vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n                tex.a = tex.r;\r\n                tex.r = 1.0;\r\n                tex.g = 1.0;\r\n                tex.b = 1.0;\r\n                gl_FragColor = tex; \r\n              } else {\r\n                discard;\r\n              }\r\n            } else {\r\n              vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              tex.a = tex.r;\r\n              tex.r = 1.0;\r\n              tex.g = 1.0;\r\n              tex.b = 1.0;\r\n              gl_FragColor = tex; \r\n            }\r\n          }`\r\n        \r\n      }else{\r\n        fragment_shader = `\r\n        uniform sampler2D texture;\r\n        uniform vec2 repeat;\r\n        uniform float height;\r\n        uniform float width;\r\n        varying vec2 vOffset;\r\n        varying vec3 vColor;\r\n        void main() {\r\n          if (width>height){\r\n            float height_rel = height/width;\r\n            float start_rel = (width-height)/(2.0*width);\r\n            float end_rel = start_rel+height_rel;\r\n            if (gl_PointCoord.y>=start_rel && gl_PointCoord.y<=end_rel) {\r\n              float y_new = ((gl_PointCoord.y-start_rel)/height_rel);\r\n              vec2 uv = vec2( gl_PointCoord.x, y_new );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              gl_FragColor = tex;\r\n            } else {\r\n              discard;\r\n            }\r\n          } else if (width<height) {\r\n            float width_rel = width/height;\r\n            float start_rel = (height-width)/(2.0*height);\r\n            float end_rel = start_rel+width_rel;\r\n            if (gl_PointCoord.x>=start_rel && gl_PointCoord.x<=end_rel) {\r\n              float x_new = ((gl_PointCoord.x-start_rel)/width_rel);\r\n              vec2 uv = vec2( x_new, gl_PointCoord.y );\r\n              vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n              gl_FragColor = tex;\r\n            } else {\r\n              discard;\r\n            }\r\n          } else {\r\n            vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\r\n            vec4 tex = texture2D( texture, uv * repeat + vOffset );\r\n            gl_FragColor = tex;\r\n          }\r\n        }`\r\n      }\r\n\r\n    // material\r\n    var material = new THREE.ShaderMaterial({\r\n      uniforms: uniforms,\r\n      vertexShader: vertex_shader,\r\n      fragmentShader: fragment_shader,\r\n      transparent: true,\r\n    })\r\n\r\n    let point = new THREE.Points(geometry, material)\r\n    point.frustumCulled = false\r\n\r\n    this.scene.children[1].visible = false\r\n    this.scene.children[1].add(point)\r\n  }\r\n\r\n\r\n  highlightPoint(sprite_index, digit_index, full_index) {\r\n    let { algorithm_choice} = this.props\r\n\r\n    let point = this.scene.children[1].children[0]\r\n\r\n    let embedding = this.props.embedding_stack.slice()[algorithm_choice][full_index]\r\n    //[full_index]\r\n\r\n    let vert = new THREE.Vector3(embedding[0], embedding[1], 0)\r\n    let vertices = [vert]\r\n\r\n    var offsets = new Float32Array(2) // 2 coordinates per point\r\n\r\n    let x = ((digit_index % this.props.sprite_side_x) * this.props.sprite_image_width) / this.props.sprite_actual_size\r\n    let y = (Math.floor(digit_index / this.props.sprite_side_x) * this.props.sprite_image_height) / this.props.sprite_actual_size\r\n    offsets[0] = x\r\n    offsets[1] = y\r\n\r\n    point.geometry.attributes.position.copyVector3sArray(vertices)\r\n    point.geometry.attributes.position.needsUpdate = true // required after the first render\r\n    point.geometry.attributes.offset.array = offsets\r\n    point.geometry.attributes.offset.needsUpdate = true // required after the first render\r\n\r\n    // need to set attributes on geometry and uniforms on material\r\n    point.material.uniforms.texture.value = this.textures[sprite_index]\r\n  }\r\n\r\n  removeHighlights() {\r\n    let highlight_container = this.scene.children[1]\r\n    let highlights = highlight_container.children\r\n    highlight_container.remove(...highlights)\r\n  }\r\n\r\n  checkIntersects(mouse_position) {\r\n    let { width, height, sidebar_ctx, sidebar_image_size_width, sidebar_image_size_height } = this.props\r\n\r\n    function mouseToThree([mouseX, mouseY]) {\r\n      return new THREE.Vector3(\r\n        (mouseX / width) * 2 - 1,\r\n        -(mouseY / height) * 2 + 1,\r\n        1\r\n      )\r\n    }\r\n\r\n    function sortIntersectsByDistanceToRay(intersects) {\r\n      return _.sortBy(intersects, 'distanceToRay')\r\n    }\r\n\r\n    let mouse_vector = mouseToThree(mouse_position)\r\n    this.raycaster.setFromCamera(mouse_vector, this.camera)\r\n    this.raycaster.params.Points.threshold = 0.5\r\n    let intersects = this.raycaster.intersectObjects(\r\n      this.scene.children[0].children\r\n    )\r\n    if (intersects[0]) {\r\n      let sorted_intersects = sortIntersectsByDistanceToRay(intersects)\r\n      let intersect = sorted_intersects[0]\r\n      let sprite_index = intersect.object.userData.sprite_index\r\n      let digit_index = intersect.index\r\n      let full_index = sprite_index * this.props.sprite_size + digit_index\r\n      this.props.setHoverIndex(full_index)\r\n      this.highlightPoint(sprite_index, digit_index, full_index)\r\n      this.scene.children[1].visible = true\r\n\r\n      sidebar_ctx.fillRect(0, 0, sidebar_image_size_width, sidebar_image_size_height)\r\n      sidebar_ctx.drawImage(\r\n        this._images[sprite_index],\r\n        // source rectangle\r\n        (digit_index % this.props.sprite_side_x) * this.props.sprite_image_width,\r\n        Math.floor(digit_index / this.props.sprite_side_x) * this.props.sprite_image_height,\r\n        this.props.sprite_image_width,\r\n        this.props.sprite_image_height,\r\n        // destination rectangle\r\n        0,\r\n        0,\r\n        sidebar_image_size_width,\r\n        sidebar_image_size_height\r\n      )\r\n    } else {\r\n      this.props.setHoverIndex(null)\r\n      this.scene.children[1].visible = false\r\n      sidebar_ctx.fillRect(0, 0, sidebar_image_size_width, sidebar_image_size_height)\r\n    }\r\n  }\r\n\r\n  handleMouse() {\r\n    let view = d3.select(this.renderer.domElement)\r\n\r\n    this.raycaster = new THREE.Raycaster()\r\n    view.on('mousemove', () => {\r\n      let [mouseX, mouseY] = d3.mouse(view.node())\r\n      let mouse_position = [mouseX, mouseY]\r\n      \r\n\r\n      this.checkIntersects(mouse_position)\r\n    })\r\n  }\r\n\r\n  init() {\r\n    let { width, height,sidebar_ctx } = this.props\r\n\r\n    this.scene = new THREE.Scene()\r\n\r\n    let vFOV = 75\r\n    let aspect = width / height\r\n    let near = 0.01\r\n    let far = 1000\r\n\r\n    this.camera = new THREE.PerspectiveCamera(vFOV, aspect, near, far)\r\n\r\n    this.renderer = new THREE.WebGLRenderer()\r\n    this.renderer.setClearColor(0x111111, 1)\r\n    this.renderer.setSize(width, height)\r\n    this.mount.appendChild(this.renderer.domElement)\r\n    \r\n\r\n    this.addPoints()\r\n\r\n    this.addBlankHighlightPoints()\r\n\r\n    this.setUpCamera()\r\n\r\n    this.animate()\r\n    \r\n    this.handleMouse()\r\n  }\r\n\r\n  animate() {\r\n    requestAnimationFrame(this.animate)\r\n    TWEEN.update()\r\n    this.renderer.render(this.scene, this.camera)\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.init()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    let { width, height } = this.props\r\n    if (width !== prevProps.width || height !== prevProps.height) {\r\n      this.handleResize(width, height)\r\n    }\r\n    if (prevProps.algorithm_choice !== this.props.algorithm_choice) {\r\n      this.changeEmbeddings(\r\n        prevProps.algorithm_choice,\r\n        this.props.algorithm_choice\r\n      )\r\n    }\r\n    if (prevProps.label_choice !== this.props.label_choice) {\r\n      this.changeLabels(\r\n        this.props.label_choice\r\n      )\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mount.removeChild(this.renderer.domElement)\r\n  }\r\n\r\n  render() {\r\n    let { width, height } = this.props\r\n    \r\n    return (\r\n      <div\r\n        style={{ width: width, height: height, overflow: 'hidden' }}\r\n        ref={mount => {\r\n          this.mount = mount\r\n        }}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default Projection\r\n","import React, { Component } from 'react'\nimport Markdown from 'react-remarkable'\nimport { about_text } from './Content'\n\nclass About extends Component {\n  render() {\n    let { grem, p } = this.props\n    return (\n      <div\n        style={{\n          position: 'fixed',\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0,\n          background: '#222',\n          color: '#fff',\n          paddingTop: grem * 2,\n          overflowY: 'auto',\n          fontSize: 16,\n          lineHeight: 1.5,\n        }}\n      >\n        <div\n          style={{\n            background: '#333',\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            right: 0,\n            padding: grem / 2,\n          }}\n        >\n          About\n          <button\n            onClick={() => {\n              this.props.toggleAbout(false)\n            }}\n            className=\"hover-555\"\n            style={{\n              position: 'absolute',\n              right: 0,\n              top: 0,\n              height: grem * 2,\n              width: grem * 2,\n              padding: grem / 2,\n              textAlign: 'center',\n              cursor: 'pointer',\n              textDecoration: 'none',\n            }}\n          >\n            &times;\n          </button>\n        </div>\n        <div\n          style={{\n            maxWidth: grem * 30,\n            margin: '0 auto',\n            padding: grem / 2,\n            color: '#fff',\n          }}\n        >\n          <Markdown>{about_text}</Markdown>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default About\n","export let about_text = `\n# About SCENATLAS\n\nThis website provides 2D visualizations of various latent spaces as presented in the work \"Traffic Scenario Novelty Detection in the Latent Space of a Vision Transformer-Based Autoencoder Triplet Network\"; Jonas Wurst, Lakshman Balasubramanian, Michael Botsch, Wolfgang Utschick; 2021. The visualization tool is an extension of [umap-explorer](https://github.com/GrantCuster/umap-explorer).\n`\n\nexport let imprint_text = `\n# Impressum\n\n## Angaben gem&auml;&szlig; &sect; 5 TMG\n   Alexander Fertig  \n   Esplanade 10  \n   85049 Ingolstadt  \n\n## Kontakt\n   Telefon: +49-841-9348-6615  \n   E-Mail: alexander.fertig@thi.de  \n\n### Haftung f&uuml;r Inhalte\nAls Diensteanbieter sind wir gem&auml;&szlig; &sect; 7 Abs.1 TMG f&uuml;r eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach &sect;&sect; 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, &uuml;bermittelte oder gespeicherte fremde Informationen zu &uuml;berwachen oder nach Umst&auml;nden zu forschen, die auf eine rechtswidrige T&auml;tigkeit hinweisen.  \nVerpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unber&uuml;hrt. Eine diesbez&uuml;gliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung m&ouml;glich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.  \n### Haftung f&uuml;r Links\nUnser Angebot enth&auml;lt Links zu externen Websites Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb k&ouml;nnen wir f&uuml;r diese fremden Inhalte auch keine Gew&auml;hr &uuml;bernehmen. F&uuml;r die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf m&ouml;gliche Rechtsverst&ouml;&szlig;e &uuml;berpr&uuml;ft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar.  \nEine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.  \n### Urheberrecht  \nDie durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielf&auml;ltigung, Bearbeitung, Verbreitung und jede Art der Verwertung au&szlig;erhalb der Grenzen des Urheberrechtes bed&uuml;rfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur f&uuml;r den privaten, nicht kommerziellen Gebrauch gestattet.  \nSoweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen.`\n\nexport let privacy_text = `\n# Datenschutz&shy;erkl&auml;rung\n## 1. Datenschutz auf einen Blick\n### Allgemeine Hinweise  \nDie folgenden Hinweise geben einen einfachen &Uuml;berblick dar&uuml;ber, was mit Ihren personenbezogenen Daten passiert, wenn Sie diese Website besuchen. Personenbezogene Daten sind alle Daten, mit denen Sie pers&ouml;nlich identifiziert werden k&ouml;nnen. Ausf&uuml;hrliche Informationen zum Thema Datenschutz entnehmen Sie unserer unter diesem Text aufgef&uuml;hrten Datenschutzerkl&auml;rung.  \n### Datenerfassung auf dieser Website+\n#### Wer ist verantwortlich f&uuml;r die Datenerfassung auf dieser Website?  \nDie Datenverarbeitung auf dieser Website erfolgt durch den Websitebetreiber. Dessen Kontaktdaten k&ouml;nnen Sie dem Abschnitt &bdquo;Hinweis zur Verantwortlichen Stelle&ldquo; in dieser Datenschutzerkl&auml;rung entnehmen.\n#### Wie erfassen wir Ihre Daten?  \nIhre Daten werden zum einen dadurch erhoben, dass Sie uns diese mitteilen. Hierbei kann es sich z.&nbsp;B. um Daten handeln, die Sie in ein Kontaktformular eingeben.  \nAndere Daten werden automatisch oder nach Ihrer Einwilligung beim Besuch der Website durch unsere IT-Systeme erfasst. Das sind vor allem technische Daten (z.&nbsp;B. Internetbrowser, Betriebssystem oder Uhrzeit des Seitenaufrufs). Die Erfassung dieser Daten erfolgt automatisch, sobald Sie diese Website betreten.  \n#### Wof&uuml;r nutzen wir Ihre Daten?  \nEin Teil der Daten wird erhoben, um eine fehlerfreie Bereitstellung der Website zu gew&auml;hrleisten. Andere Daten k&ouml;nnen zur Analyse Ihres Nutzerverhaltens verwendet werden.  \n#### Welche Rechte haben Sie bez&uuml;glich Ihrer Daten?  \nSie haben jederzeit das Recht, unentgeltlich Auskunft &uuml;ber Herkunft, Empf&auml;nger und Zweck Ihrer gespeicherten personenbezogenen Daten zu erhalten. Sie haben au&szlig;erdem ein Recht, die Berichtigung oder L&ouml;schung dieser Daten zu verlangen. Wenn Sie eine Einwilligung zur Datenverarbeitung erteilt haben, k&ouml;nnen Sie diese Einwilligung jederzeit f&uuml;r die Zukunft widerrufen. Au&szlig;erdem haben Sie das Recht, unter bestimmten Umst&auml;nden die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Des Weiteren steht Ihnen ein Beschwerderecht bei der zust&auml;ndigen Aufsichtsbeh&ouml;rde zu.  \nHierzu sowie zu weiteren Fragen zum Thema Datenschutz k&ouml;nnen Sie sich jederzeit an uns wenden.  \n## 2. Hosting und Content Delivery Networks (CDN)\n### Externes Hosting  \nDiese Website wird bei einem externen Dienstleister gehostet (Hoster). Die personenbezogenen Daten, die auf dieser Website erfasst werden, werden auf den Servern des Hosters gespeichert. Hierbei kann es sich v. a. um IP-Adressen, Kontaktanfragen, Meta- und Kommunikationsdaten, Vertragsdaten, Kontaktdaten, Namen, Websitezugriffe und sonstige Daten, die &uuml;ber eine Website generiert werden, handeln.  \nDer Einsatz des Hosters erfolgt zum Zwecke der Vertragserf&uuml;llung gegen&uuml;ber unseren potenziellen und bestehenden Kunden (Art. 6 Abs. 1 lit. b DSGVO) und im Interesse einer sicheren, schnellen und effizienten Bereitstellung unseres Online-Angebots durch einen professionellen Anbieter (Art. 6 Abs. 1 lit. f DSGVO).  \nUnser Hoster wird Ihre Daten nur insoweit verarbeiten, wie dies zur Erf&uuml;llung seiner Leistungspflichten erforderlich ist und unsere Weisungen in Bezug auf diese Daten befolgen.  \nWir setzen folgenden Hoster ein:  \nGitHub Inc.  \n88 Colin P Kelly Jr St  \nSan Francisco, CA 94107  \nUnited States  \n## 3. Allgemeine Hinweise und Pflicht&shy;informationen  \n### Datenschutz  \nDie Betreiber dieser Seiten nehmen den Schutz Ihrer pers&ouml;nlichen Daten sehr ernst. Wir behandeln Ihre personenbezogenen Daten vertraulich und entsprechend der gesetzlichen Datenschutzvorschriften sowie dieser Datenschutzerkl&auml;rung.  \nWenn Sie diese Website benutzen, werden verschiedene personenbezogene Daten erhoben. Personenbezogene Daten sind Daten, mit denen Sie pers&ouml;nlich identifiziert werden k&ouml;nnen. Die vorliegende Datenschutzerkl&auml;rung erl&auml;utert, welche Daten wir erheben und wof&uuml;r wir sie nutzen. Sie erl&auml;utert auch, wie und zu welchem Zweck das geschieht.  \nWir weisen darauf hin, dass die Daten&uuml;bertragung im Internet (z.&nbsp;B. bei der Kommunikation per E-Mail) Sicherheitsl&uuml;cken aufweisen kann. Ein l&uuml;ckenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht m&ouml;glich.  \n### Hinweis zur verantwortlichen Stelle  \nDie verantwortliche Stelle f&uuml;r die Datenverarbeitung auf dieser Website ist:  \nAlexander Fertig\nEsplanade 10  \n85049 Ingolstadt  \n\nTelefon: +49-841-9348-6615 \nE-Mail: alexander.fertig@thi.de  \nVerantwortliche Stelle ist die nat&uuml;rliche oder juristische Person, die allein oder gemeinsam mit anderen &uuml;ber die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten (z.&nbsp;B. Namen, E-Mail-Adressen o. &Auml;.) entscheidet.  \n### Speicherdauer  \nSoweit innerhalb dieser Datenschutzerkl&auml;rung keine speziellere Speicherdauer genannt wurde, verbleiben Ihre personenbezogenen Daten bei uns, bis der Zweck f&uuml;r die Datenverarbeitung entf&auml;llt. Wenn Sie ein berechtigtes L&ouml;schersuchen geltend machen oder eine Einwilligung zur Datenverarbeitung widerrufen, werden Ihre Daten gel&ouml;scht, sofern wir keinen anderen rechtlich zul&auml;ssigen&nbsp; Gr&uuml;nde f&uuml;r die Speicherung Ihrer personenbezogenen Daten haben (z.B. steuer- oder handelsrechtliche Aufbewahrungsfristen); im letztgenannten Fall erfolgt die L&ouml;schung nach Fortfall dieser Gr&uuml;nde.  \n### Widerruf Ihrer Einwilligung zur Datenverarbeitung  \nViele Datenverarbeitungsvorg&auml;nge sind nur mit Ihrer ausdr&uuml;cklichen Einwilligung m&ouml;glich. Sie k&ouml;nnen eine bereits erteilte Einwilligung jederzeit widerrufen. Die Rechtm&auml;&szlig;igkeit der bis zum Widerruf erfolgten Datenverarbeitung bleibt vom Widerruf unber&uuml;hrt.  \n### Widerspruchsrecht gegen die Datenerhebung in besonderen F&auml;llen sowie gegen Direktwerbung (Art. 21 DSGVO)  \nWENN DIE DATENVERARBEITUNG AUF GRUNDLAGE VON ART. 6 ABS. 1 LIT. E ODER F DSGVO ERFOLGT, HABEN SIE JEDERZEIT DAS RECHT, AUS GR&Uuml;NDEN, DIE SICH AUS IHRER BESONDEREN SITUATION ERGEBEN, GEGEN DIE VERARBEITUNG IHRER PERSONENBEZOGENEN DATEN WIDERSPRUCH EINZULEGEN; DIES GILT AUCH F&Uuml;R EIN AUF DIESE BESTIMMUNGEN GEST&Uuml;TZTES PROFILING. DIE JEWEILIGE RECHTSGRUNDLAGE, AUF DENEN EINE VERARBEITUNG BERUHT, ENTNEHMEN SIE DIESER DATENSCHUTZERKL&Auml;RUNG. WENN SIE WIDERSPRUCH EINLEGEN, WERDEN WIR IHRE BETROFFENEN PERSONENBEZOGENEN DATEN NICHT MEHR VERARBEITEN, ES SEI DENN, WIR K&Ouml;NNEN ZWINGENDE SCHUTZW&Uuml;RDIGE GR&Uuml;NDE F&Uuml;R DIE VERARBEITUNG NACHWEISEN, DIE IHRE INTERESSEN, RECHTE UND FREIHEITEN &Uuml;BERWIEGEN ODER DIE VERARBEITUNG DIENT DER GELTENDMACHUNG, AUS&Uuml;BUNG ODER VERTEIDIGUNG VON RECHTSANSPR&Uuml;CHEN (WIDERSPRUCH NACH ART. 21 ABS. 1 DSGVO).  \nWERDEN IHRE PERSONENBEZOGENEN DATEN VERARBEITET, UM DIREKTWERBUNG ZU BETREIBEN, SO HABEN SIE DAS RECHT, JEDERZEIT WIDERSPRUCH GEGEN DIE VERARBEITUNG SIE BETREFFENDER PERSONENBEZOGENER DATEN ZUM ZWECKE DERARTIGER WERBUNG EINZULEGEN; DIES GILT AUCH F&Uuml;R DAS PROFILING, SOWEIT ES MIT SOLCHER DIREKTWERBUNG IN VERBINDUNG STEHT. WENN SIE WIDERSPRECHEN, WERDEN IHRE PERSONENBEZOGENEN DATEN ANSCHLIESSEND NICHT MEHR ZUM ZWECKE DER DIREKTWERBUNG VERWENDET (WIDERSPRUCH NACH ART. 21 ABS. 2 DSGVO).  \n### Beschwerde&shy;recht bei der zust&auml;ndigen Aufsichts&shy;beh&ouml;rde  \nIm Falle von Verst&ouml;&szlig;en gegen die DSGVO steht den Betroffenen ein Beschwerderecht bei einer Aufsichtsbeh&ouml;rde, insbesondere in dem Mitgliedstaat ihres gew&ouml;hnlichen Aufenthalts, ihres Arbeitsplatzes oder des Orts des mutma&szlig;lichen Versto&szlig;es zu. Das Beschwerderecht besteht unbeschadet anderweitiger verwaltungsrechtlicher oder gerichtlicher Rechtsbehelfe.\n### Recht auf Daten&shy;&uuml;bertrag&shy;barkeit  \nSie haben das Recht, Daten, die wir auf Grundlage Ihrer Einwilligung oder in Erf&uuml;llung eines Vertrags automatisiert verarbeiten, an sich oder an einen Dritten in einem g&auml;ngigen, maschinenlesbaren Format aush&auml;ndigen zu lassen. Sofern Sie die direkte &Uuml;bertragung der Daten an einen anderen Verantwortlichen verlangen, erfolgt dies nur, soweit es technisch machbar ist.  \n### Auskunft, L&ouml;schung und Berichtigung  \nSie haben im Rahmen der geltenden gesetzlichen Bestimmungen jederzeit das Recht auf unentgeltliche Auskunft &uuml;ber Ihre gespeicherten personenbezogenen Daten, deren Herkunft und Empf&auml;nger und den Zweck der Datenverarbeitung und ggf. ein Recht auf Berichtigung oder L&ouml;schung dieser Daten. Hierzu sowie zu weiteren Fragen zum Thema personenbezogene Daten k&ouml;nnen Sie sich jederzeit an uns wenden.  \n### Recht auf Einschr&auml;nkung der Verarbeitung  \nSie haben das Recht, die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Hierzu k&ouml;nnen Sie sich jederzeit an uns wenden. Das Recht auf Einschr&auml;nkung der Verarbeitung besteht in folgenden F&auml;llen:\n- Wenn Sie die Richtigkeit Ihrer bei uns gespeicherten personenbezogenen Daten bestreiten, ben&ouml;tigen wir in der Regel Zeit, um dies zu &uuml;berpr&uuml;fen. F&uuml;r die Dauer der Pr&uuml;fung haben Sie das Recht, die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen.  \n- Wenn die Verarbeitung Ihrer personenbezogenen Daten unrechtm&auml;&szlig;ig geschah/geschieht, k&ouml;nnen Sie statt der L&ouml;schung die Einschr&auml;nkung der Datenverarbeitung verlangen.  \n- Wenn wir Ihre personenbezogenen Daten nicht mehr ben&ouml;tigen, Sie sie jedoch zur Aus&uuml;bung, Verteidigung oder Geltendmachung von Rechtsanspr&uuml;chen ben&ouml;tigen, haben Sie das Recht, statt der L&ouml;schung die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen.  \n- Wenn Sie einen Widerspruch nach Art. 21 Abs. 1 DSGVO eingelegt haben, muss eine Abw&auml;gung zwischen Ihren und unseren Interessen vorgenommen werden. Solange noch nicht feststeht, wessen Interessen &uuml;berwiegen, haben Sie das Recht, die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen.  \nWenn Sie die Verarbeitung Ihrer personenbezogenen Daten eingeschr&auml;nkt haben, d&uuml;rfen diese Daten &ndash; von ihrer Speicherung abgesehen &ndash; nur mit Ihrer Einwilligung oder zur Geltendmachung, Aus&uuml;bung oder Verteidigung von Rechtsanspr&uuml;chen oder zum Schutz der Rechte einer anderen nat&uuml;rlichen oder juristischen Person oder aus Gr&uuml;nden eines wichtigen &ouml;ffentlichen Interesses der Europ&auml;ischen Union oder eines Mitgliedstaats verarbeitet werden.`","import React, { Component } from 'react'\nimport Markdown from 'react-remarkable'\nimport { imprint_text } from './Content'\n\nclass Imprint extends Component {\n  render() {\n    let { grem, p } = this.props\n    return (\n      <div\n        style={{\n          position: 'fixed',\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0,\n          background: '#222',\n          color: '#fff',\n          paddingTop: grem * 2,\n          overflowY: 'auto',\n          fontSize: 16,\n          lineHeight: 1.5,\n        }}\n      >\n        <div\n          style={{\n            background: '#333',\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            right: 0,\n            padding: grem / 2,\n          }}\n        >\n          Imprint\n          <button\n            onClick={() => {\n              this.props.toggleImprint(false)\n            }}\n            className=\"hover-555\"\n            style={{\n              position: 'absolute',\n              right: 0,\n              top: 0,\n              height: grem * 2,\n              width: grem * 2,\n              padding: grem / 2,\n              textAlign: 'center',\n              cursor: 'pointer',\n              textDecoration: 'none',\n            }}\n          >\n            &times;\n          </button>\n        </div>\n        <div\n          style={{\n            maxWidth: grem * 30,\n            margin: '0 auto',\n            padding: grem / 2,\n            color: '#fff',\n          }}\n        >\n          <Markdown>{imprint_text}</Markdown>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Imprint\n","import React, { Component } from 'react'\nimport Markdown from 'react-remarkable'\nimport { privacy_text } from './Content'\n\nclass Privacy extends Component {\n  render() {\n    let { grem, p } = this.props\n    return (\n      <div\n        style={{\n          position: 'fixed',\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0,\n          background: '#222',\n          color: '#fff',\n          paddingTop: grem * 2,\n          overflowY: 'auto',\n          fontSize: 16,\n          lineHeight: 1.5,\n        }}\n      >\n        <div\n          style={{\n            background: '#333',\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            right: 0,\n            padding: grem / 2,\n          }}\n        >\n          Privacy\n          <button\n            onClick={() => {\n              this.props.togglePrivacy(false)\n            }}\n            className=\"hover-555\"\n            style={{\n              position: 'absolute',\n              right: 0,\n              top: 0,\n              height: grem * 2,\n              width: grem * 2,\n              padding: grem / 2,\n              textAlign: 'center',\n              cursor: 'pointer',\n              textDecoration: 'none',\n            }}\n          >\n            &times;\n          </button>\n        </div>\n        <div\n          style={{\n            maxWidth: grem * 30,\n            margin: '0 auto',\n            padding: grem / 2,\n            color: '#fff',\n          }}\n        >\n          <Markdown>{privacy_text}</Markdown>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Privacy\n","import React, { Component } from 'react'\r\nimport Sidebar from './Sidebar'\r\nimport Projection from './Projection'\r\nimport About from './About'\r\nimport Imprint from './Imprint'\r\nimport Privacy from './Privacy'\r\nimport * as _ from 'lodash'\r\n\r\n// padding constructor\r\nfunction p(tb, lr) {\r\n  return `${tb}px ${lr}px`\r\n}\r\n\r\nclass Layout extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ww: null,\r\n      wh: null,\r\n      sidebar_height: null,\r\n      hover_index: null,\r\n      show_about: null,\r\n      show_imprint: null,\r\n      show_privacy: null,\r\n      algorithm_choice: 0,\r\n      label_choice: 0,\r\n      color_description_choice: 0,\r\n    }\r\n    this.sidebar_ctx = null\r\n    this.setSize = _.debounce(this.setSize.bind(this), 200)\r\n    this.checkHash = this.checkHash.bind(this)\r\n    this.setSidebarCanvas = this.setSidebarCanvas.bind(this)\r\n    this.toggleAbout = this.toggleAbout.bind(this)\r\n    this.toggleImprint = this.toggleImprint.bind(this)\r\n    this.togglePrivacy = this.togglePrivacy.bind(this)\r\n    this.selectAlgorithm = this.selectAlgorithm.bind(this)\r\n    this.selectLabel = this.selectLabel.bind(this)\r\n    this.selectColorDescription = this.selectColorDescription(this)\r\n  }\r\n\r\n  selectAlgorithm(v) {\r\n    let i = this.props.algorithm_options.indexOf(v)\r\n    this.setState({ algorithm_choice: i })\r\n    // TODO so the labels get updated with new embeddings\r\n    // this.setState({ label_choice: i })\r\n  }\r\n  selectLabel(v) {\r\n    let i = this.props.label_options.indexOf(v)\r\n    this.setState({ label_choice: i })\r\n  }\r\n  selectColorDescription(v) {\r\n    let i = this.props.label_options.indexOf(v)\r\n    this.setState({ color_description_choice: i })\r\n  }\r\n\r\n  setSize() {\r\n    this.setState({ ww: window.innerWidth, wh: window.innerHeight })\r\n    let sidebar_height = this.sidebar_mount.offsetHeight\r\n    this.setState({ sidebar_height: sidebar_height })\r\n    if (this.sidebar_ctx) this.sidebar_ctx.imageSmoothingEnabled = false\r\n  }\r\n\r\n  setSidebarCanvas(canvas) {\r\n    let ctx = canvas.getContext('2d')\r\n    ctx.imageSmoothingEnabled = false\r\n    this.sidebar_ctx = ctx\r\n  }\r\n\r\n\r\n  toggleAbout(state) {\r\n    if (state === true) {\r\n      window.history.pushState(null, 'About', '#about')\r\n      this.setState({ show_about: true })\r\n    } else if (state === false) {\r\n      window.history.pushState(null, ' ', window.location.pathname)\r\n      this.setState({ show_about: false })\r\n    }\r\n  }\r\n\r\n  toggleImprint(state) {\r\n    if (state === true) {\r\n      window.history.pushState(null, 'Imprint', '#impressum')\r\n      this.setState({ show_imprint: true })\r\n    } else if (state === false) {\r\n      window.history.pushState(null, ' ', window.location.pathname)\r\n      this.setState({ show_imprint: false })\r\n    }\r\n  }\r\n\r\n  togglePrivacy(state) {\r\n    if (state === true) {\r\n      window.history.pushState(null, 'Privacy', '#datenschutzerklaerung')\r\n      this.setState({ show_privacy: true })\r\n    } else if (state === false) {\r\n      window.history.pushState(null, ' ', window.location.pathname)\r\n      this.setState({ show_privacy: false })\r\n    }\r\n  }\r\n\r\n  setHoverIndex(hover_index) {\r\n    this.setState({ hover_index: hover_index })\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.setSize()\r\n    this.checkHash()\r\n  }\r\n\r\n  checkHash() {\r\n    if (window.location.hash && window.location.hash === '#about') {\r\n      this.setState({ show_about: true })\r\n    } else {\r\n      this.setState({ show_about: false })\r\n    }\r\n\r\n    if (window.location.hash && window.location.hash === '#datenschutzerklaerung') {\r\n      this.setState({ show_privacy: true })\r\n    } else {\r\n      this.setState({ show_privacy: false })\r\n    }\r\n\r\n    if (window.location.hash && window.location.hash === '#impressum') {\r\n      this.setState({ show_imprint: true })\r\n    } else {\r\n      this.setState({ show_imprint: false })\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this.setSize)\r\n    window.addEventListener('popstate', this.checkHash)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.setSize)\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      embeddings,\r\n      embedding_stack,\r\n      labels,\r\n      label_stack,\r\n      algorithm_options,\r\n      label_options,\r\n      color_array,\r\n      color_array_stack,\r\n      colored_images,\r\n      description,\r\n      description_stack,\r\n      sprite_side,\r\n      sprite_side_x,\r\n      sprite_side_y,\r\n      sprite_size,\r\n      sprite_number,\r\n      sprite_image_size,\r\n      sprite_image_width,\r\n      sprite_image_height,\r\n      sprite_actual_size,\r\n      sprite_ratio,\r\n      zoom_min,\r\n      zoom_mid,\r\n      zoom_max,\r\n      hoover_size,\r\n    } = this.props\r\n    let {\r\n      ww,\r\n      wh,\r\n      sidebar_height,\r\n      hover_index,\r\n      show_about,\r\n      show_imprint,\r\n      show_privacy,\r\n      algorithm_choice,\r\n      label_choice,\r\n      color_description_choice,\r\n    } = this.state\r\n    let sidebar_ctx = this.sidebar_ctx\r\n\r\n\r\n    let line_height = 1.5\r\n\r\n    let sidebar_style = {\r\n      position: 'absolute',\r\n      left: 0,\r\n      top: 0,\r\n      height: '100vh',\r\n      overflow: 'auto',\r\n      background: '#222',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n    }\r\n    let main_style = {\r\n      position: 'relative',\r\n      height: '100vh',\r\n      background: '#111',\r\n      overflow: 'hidden',\r\n    }\r\n\r\n    let sidebar_image_size_width, sidebar_image_size_height, sidebar_orientation\r\n    let font_size = 16\r\n    if (ww < 800) {\r\n      font_size = 14\r\n      sidebar_style = {\r\n        ...sidebar_style,\r\n        flexDirection: 'row',\r\n        width: '100%',\r\n        top: 'auto',\r\n        height: 'auto',\r\n        bottom: 0,\r\n      }\r\n      main_style = { width: ww, height: wh - sidebar_height }\r\n      sidebar_image_size_height = font_size * line_height * 3\r\n      sidebar_image_size_width = sidebar_image_size_height * this.props.sprite_ratio\r\n      sidebar_orientation = 'horizontal'\r\n    } else if (ww < 800 + 600) {\r\n      let scaler = 200 + (300 - 200) * ((ww - 800) / 600)\r\n      font_size = 14 + 2 * ((ww - 800) / 600)\r\n      sidebar_style = {\r\n        ...sidebar_style,\r\n        width: scaler,\r\n      }\r\n      sidebar_image_size_width = sidebar_style.width\r\n      sidebar_image_size_height = sidebar_image_size_width / this.props.sprite_ratio\r\n      main_style = {\r\n        ...main_style,\r\n        width: ww - scaler,\r\n        left: scaler,\r\n        height: wh,\r\n      }\r\n      sidebar_orientation = 'vertical'\r\n    } else {\r\n      sidebar_style = {\r\n        ...sidebar_style,\r\n        width: 300,\r\n      }\r\n      main_style = {\r\n        ...main_style,\r\n        width: ww - 300,\r\n        left: 300,\r\n        height: wh,\r\n      }\r\n      sidebar_image_size_width = sidebar_style.width\r\n      sidebar_image_size_height = sidebar_image_size_width / this.props.sprite_ratio\r\n      sidebar_orientation = 'vertical'\r\n    }\r\n\r\n    let grem = font_size * line_height\r\n\r\n    let general_style = {\r\n      fontSize: font_size,\r\n      lineHeight: line_height,\r\n    }\r\n\r\n    return ww !== null ? (\r\n      <div style={general_style}>\r\n        <div\r\n          style={sidebar_style}\r\n          ref={sidebar_mount => {\r\n            this.sidebar_mount = sidebar_mount\r\n          }}\r\n        >\r\n          <Sidebar\r\n            sidebar_orientation={sidebar_orientation}\r\n            sidebar_image_size_width={sidebar_image_size_width}\r\n            sidebar_image_size_height={sidebar_image_size_height}\r\n            grem={grem}\r\n            p={p}\r\n            color_array={color_array}\r\n            color_array_stack={color_array_stack}\r\n            colored_images={colored_images}\r\n            description = {description}\r\n            description_stack = {description_stack}\r\n            setSidebarCanvas={this.setSidebarCanvas}\r\n            hover_index={hover_index}\r\n            labels={labels}\r\n            label_stack={label_stack}\r\n            toggleAbout={this.toggleAbout}\r\n            togglePrivacy={this.togglePrivacy}\r\n            toggleImprint={this.toggleImprint}\r\n            algorithm_options={algorithm_options}\r\n            algorithm_choice={algorithm_choice}\r\n            selectAlgorithm={this.selectAlgorithm}\r\n            label_options={label_options}\r\n            label_choice={label_choice}\r\n            selectLabel={this.selectLabel}\r\n            color_description_choice={color_description_choice}\r\n            selectColorDescription={this.selectColorDescription}\r\n          />\r\n        </div>\r\n        <div style={main_style}>\r\n          <Projection\r\n            width={main_style.width}\r\n            height={main_style.height}\r\n            embeddings={embeddings}\r\n            embedding_stack = {embedding_stack}\r\n            sprite_side= {sprite_side}\r\n            sprite_side_x= {sprite_side_x}\r\n            sprite_side_y= {sprite_side_y}\r\n            sprite_size= {sprite_size}\r\n            sprite_number= {sprite_number}\r\n            sprite_image_size= {sprite_image_size}\r\n            sprite_image_width= {sprite_image_width}\r\n            sprite_image_height= {sprite_image_height}\r\n            sprite_actual_size= {sprite_actual_size}\r\n            sprite_ratio = {sprite_ratio}\r\n            zoom_min = {zoom_min}\r\n            zoom_mid = {zoom_mid}\r\n            zoom_max = {zoom_max}\r\n            hoover_size = {hoover_size}\r\n            labels={labels}\r\n            label_stack={label_stack}\r\n            color_array={color_array}\r\n            color_array_stack={color_array_stack}\r\n            colored_images={colored_images}\r\n            description={description}\r\n            description_stack={description_stack}\r\n            sidebar_ctx={sidebar_ctx}\r\n            sidebar_image_size_width={sidebar_image_size_width}\r\n            sidebar_image_size_height={sidebar_image_size_height}\r\n            setHoverIndex={this.setHoverIndex.bind(this)}\r\n            algorithm_choice={algorithm_choice}\r\n            label_choice={label_choice}\r\n            color_description_choice={color_description_choice}\r\n          />\r\n        </div>\r\n        {show_about ? (\r\n          <About grem={grem} p={p} toggleAbout={this.toggleAbout} />\r\n        ) : null}\r\n        {show_imprint ? (\r\n          <Imprint grem={grem} p={p} toggleImprint={this.toggleImprint} />\r\n        ) : null}\r\n        {show_privacy ? (\r\n          <Privacy grem={grem} p={p} togglePrivacy={this.togglePrivacy} />\r\n        ) : null}\r\n      </div>\r\n    ) : (\r\n      <div style={{ padding: '1rem' }}>Loading layout...</div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Layout\r\n","import React, { Component } from 'react'\r\nimport Layout from './Layout'\r\nimport * as _ from 'lodash'\r\nimport * as d3 from 'd3'\r\nimport { json } from 'd3'\r\n\r\nlet embedding_string = 'embeddings_'\r\nlet label_string = 'labels_'\r\nlet color_array_string = 'color_array_'\r\nlet description_string = 'description_'\r\n\r\nfunction getJson(){\r\n  return fetch(`${process.env.PUBLIC_URL}/set_up.json`)\r\n  .then((res) => res.json())\r\n  .then((json) => json)\r\n};\r\n\r\nasync function loadParams(){\r\n  let jsondata\r\n  await getJson().then((temp) =>{\r\n    jsondata = temp\r\n  })\r\n  let object_return = new Object()\r\n  object_return.sprite_side       = jsondata.sprite_side\r\n  object_return.sprite_side_x     = jsondata.sprite_side_x\r\n  object_return.sprite_side_y     = jsondata.sprite_side_y\r\n  object_return.sprite_size       = object_return.sprite_side_x * object_return.sprite_side_y\r\n  object_return.sprite_number     = jsondata.sprite_number\r\n  object_return.sprite_image_size = jsondata.sprite_image_size\r\n  object_return.sprite_image_width= jsondata.sprite_image_width\r\n  object_return.sprite_image_height= jsondata.sprite_image_height\r\n  object_return.sprite_ratio      = object_return.sprite_image_width / object_return.sprite_image_height\r\n  object_return.sprite_actual_size= jsondata.sprite_actual_size\r\n  object_return.algorithm_options = jsondata.embedding_names\r\n  object_return.label_options     = jsondata.label_names\r\n  object_return.embedding_number  = jsondata.embedding_number\r\n  object_return.label_number      = jsondata.label_number\r\n  object_return.colored_images    = jsondata.colored_images\r\n  object_return.zoom_min          = jsondata.zoom_min\r\n  object_return.zoom_mid          = jsondata.zoom_mid\r\n  object_return.zoom_max          = jsondata.zoom_max\r\n  object_return.hoover_size       = jsondata.hoover_size\r\n  return object_return\r\n}\r\n\r\nclass Data extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      sprite_side:null,\r\n      sprite_side_x:null,\r\n      sprite_side_y:null,\r\n      sprite_size: null,\r\n      sprite_number:null,\r\n      sprite_image_size:null,\r\n      sprite_image_width:null,\r\n      sprite_image_height:null,\r\n      sprite_actual_size:null,\r\n      sprite_ratio:null,\r\n      algorithm_options: null,\r\n      label_options:null,\r\n      embedding_number: null,\r\n      label_number:null,\r\n      color_array:null,\r\n      color_array_stack: [],\r\n      description:null,\r\n      description_stack: [],\r\n      embeddings: null,\r\n      embedding_stack: [],\r\n      labels: null,\r\n      label_stack: [],\r\n      colored_images: null,\r\n      zoom_min: null,\r\n      zoom_mid: null,\r\n      zoom_max: null,\r\n      hoover_size: null,\r\n    }\r\n  }\r\n\r\n  scaleEmbeddings(embeddings) {\r\n    let xs = embeddings.map(e => Math.abs(e[0]))\r\n    let ys = embeddings.map(e => Math.abs(e[1]))\r\n    let max_x = _.max(xs)\r\n    let max_y = _.max(ys)\r\n    let max = Math.max(max_x, max_y)\r\n    let scale = d3\r\n      .scaleLinear()\r\n      .domain([-max, max])\r\n      .range([-20, 20])\r\n    let scaled_embeddings = embeddings.map(e => [scale(e[0]), scale(e[1])])\r\n    return scaled_embeddings\r\n  }\r\n\r\n  componentDidMount() {\r\n    Promise.resolve(loadParams()).then((object_return_val)=>{\r\n      this.setState({\r\n        sprite_side: object_return_val.sprite_side,\r\n        sprite_side_x: object_return_val.sprite_side_x,\r\n        sprite_side_y: object_return_val.sprite_side_y,\r\n        sprite_size: object_return_val.sprite_size,\r\n        sprite_number: object_return_val.sprite_number,\r\n        sprite_image_size: object_return_val.sprite_image_size,\r\n        sprite_image_width: object_return_val.sprite_image_width,\r\n        sprite_image_height: object_return_val.sprite_image_height,\r\n        sprite_actual_size: object_return_val.sprite_actual_size,\r\n        embedding_number: object_return_val.embedding_number,\r\n        label_number: object_return_val.label_number,\r\n        algorithm_options: new Array(object_return_val.embedding_number),\r\n        label_options: new Array(object_return_val.label_number),\r\n        label_stack: new Array(object_return_val.label_number),\r\n        color_array_stack: new Array(object_return_val.label_number),\r\n        description_stack: new Array(object_return_val.label_number),\r\n        embedding_stack: new Array(object_return_val.embedding_number),\r\n        sprite_ratio: object_return_val.sprite_ratio ,\r\n        colored_images: object_return_val.colored_images,\r\n        zoom_min: object_return_val.zoom_min,\r\n        zoom_mid: object_return_val.zoom_mid,\r\n        zoom_max: object_return_val.zoom_max,\r\n        hoover_size: object_return_val.hoover_size,\r\n      })\r\n      // EMBEDDINGS\r\n      if (this.state.embedding_number > 1){\r\n        fetch(`${process.env.PUBLIC_URL}/${embedding_string}0.json`)\r\n        .then(response => response.json())\r\n        .then(jsondata => {\r\n          let scaled_embeddings = this.scaleEmbeddings(jsondata.points)\r\n          let embedding_stack_local =  this.state.embedding_stack.slice()\r\n          let algorithm_options_local =  this.state.algorithm_options.slice()\r\n          embedding_stack_local[0] = scaled_embeddings\r\n          algorithm_options_local[0] = '0__'+jsondata.name\r\n          this.setState({\r\n            embeddings: scaled_embeddings,\r\n            embedding_stack: embedding_stack_local,\r\n            algorithm_options: algorithm_options_local\r\n          })\r\n        })\r\n        for(let i=1;i<this.state.embedding_number; i++){\r\n          fetch(`${process.env.PUBLIC_URL}/${embedding_string}${i}.json`)\r\n          .then(response => response.json())\r\n          .then(jsondata => {\r\n            let scaled_embeddings = this.scaleEmbeddings(jsondata.points)\r\n            let embedding_stack_local =  this.state.embedding_stack.slice()\r\n            let algorithm_options_local =  this.state.algorithm_options.slice()\r\n            embedding_stack_local[i] = scaled_embeddings\r\n            algorithm_options_local[i] = String(i)+'__'+jsondata.name\r\n            this.setState({\r\n              embeddings: scaled_embeddings,\r\n              embedding_stack: embedding_stack_local,\r\n              algorithm_options: algorithm_options_local\r\n            })\r\n          })\r\n        }\r\n        // LABEL\r\n        fetch(`${process.env.PUBLIC_URL}/${label_string}0.json`)\r\n          .then(response => response.json())\r\n          .then(labels => {\r\n            let label_stack_local = this.state.label_stack.slice()\r\n            label_stack_local[0] = labels\r\n            this.setState({\r\n              labels: labels,\r\n              label_stack: label_stack_local\r\n            })\r\n          })\r\n        for (let i = 1; i < this.state.embedding_number; i++) {\r\n          fetch(`${process.env.PUBLIC_URL}/${label_string}${i}.json`)\r\n            .then(response => response.json())\r\n            .then(labels => {\r\n              let label_stack_local = this.state.label_stack.slice()\r\n              label_stack_local[i] = labels\r\n              this.setState({\r\n                label_stack: label_stack_local\r\n              })\r\n            })\r\n        }\r\n      }\r\n      else{\r\n        fetch(`${process.env.PUBLIC_URL}/${embedding_string}0.json`)\r\n        .then(response => response.json())\r\n        .then(jsondata => {\r\n          let scaled_embeddings = this.scaleEmbeddings(jsondata.points)\r\n          let embedding_stack_local =  this.state.embedding_stack.slice()\r\n          let algorithm_options_local =  this.state.algorithm_options.slice()\r\n          embedding_stack_local[0] = scaled_embeddings\r\n          algorithm_options_local[0] = '0__'+jsondata.name\r\n          this.setState({\r\n            embeddings: scaled_embeddings,\r\n            embedding_stack: embedding_stack_local,\r\n            algorithm_options: algorithm_options_local\r\n          })\r\n        })\r\n        // LABEL\r\n        fetch(`${process.env.PUBLIC_URL}/${label_string}0.json`)\r\n          .then(response => response.json())\r\n          .then(labels => {\r\n            let label_stack_local = this.state.label_stack.slice()\r\n            label_stack_local[0] = labels\r\n            this.setState({\r\n              labels: labels,\r\n              label_stack: label_stack_local\r\n            })\r\n          })\r\n\r\n      }\r\n      // LABELS AND COLORMAP AND DESCRIPTION\r\n      if (this.state.label_number > 1){\r\n        // // LABEL\r\n        // fetch(`${process.env.PUBLIC_URL}/${label_string}0.json`)\r\n        // .then(response => response.json())\r\n        // .then(labels => {\r\n        //   let label_stack_local =  this.state.label_stack.slice()\r\n        //   label_stack_local[0] = labels\r\n        //   this.setState({\r\n        //     labels: labels,\r\n        //     label_stack: label_stack_local\r\n        //   })\r\n        // })\r\n        // for(let i=1;i<this.state.embedding_number; i++){\r\n        //   fetch(`${process.env.PUBLIC_URL}/${label_string}${i}.json`)\r\n        //   .then(response => response.json())\r\n        //   .then(labels => {\r\n        //     let label_stack_local =  this.state.label_stack.slice()\r\n        //     label_stack_local[i] = labels\r\n        //     this.setState({\r\n        //       label_stack: label_stack_local\r\n        //     })\r\n        //   })\r\n        // }\r\n        // COLOR\r\n        fetch(`${process.env.PUBLIC_URL}/${color_array_string}0.json`)\r\n        .then(response => response.json())\r\n        .then(color => {\r\n          let color_array_stack_local =  this.state.color_array_stack.slice()\r\n          color_array_stack_local[0] = color\r\n          this.setState({\r\n            color_array: color,\r\n            color_array_stack: color_array_stack_local\r\n          })\r\n        })\r\n        for(let i=1;i<this.state.label_number; i++){\r\n          fetch(`${process.env.PUBLIC_URL}/${color_array_string}${i}.json`)\r\n          .then(response => response.json())\r\n          .then(color => {\r\n            let color_array_stack_local =  this.state.color_array_stack.slice()\r\n            color_array_stack_local[i] = color\r\n            this.setState({\r\n              color_array_stack: color_array_stack_local\r\n            })\r\n          })\r\n        }\r\n        // DESCRIPTION\r\n        fetch(`${process.env.PUBLIC_URL}/${description_string}0.json`)\r\n        .then(response => response.json())\r\n        .then(description => {\r\n          let description_stack_local =  this.state.description_stack.slice()\r\n          description_stack_local[0] = description\r\n          let label_options_local =  this.state.label_options.slice()\r\n          label_options_local[0] = description.name\r\n          this.setState({\r\n            description: description,\r\n            description_stack: description_stack_local,\r\n            label_options: label_options_local\r\n          })\r\n        })\r\n        for(let i=1;i<this.state.label_number; i++){\r\n          fetch(`${process.env.PUBLIC_URL}/${description_string}${i}.json`)\r\n          .then(response => response.json())\r\n          .then(description => {\r\n            let description_stack_local =  this.state.description_stack.slice()\r\n            description_stack_local[i] = description\r\n            let label_options_local =  this.state.label_options.slice()\r\n            label_options_local[i] = description.name\r\n            this.setState({\r\n              description_stack: description_stack_local,\r\n              label_options: label_options_local\r\n            })\r\n          })\r\n        }\r\n      }\r\n      else{\r\n        // // LABEL\r\n        // fetch(`${process.env.PUBLIC_URL}/${label_string}0.json`)\r\n        // .then(response => response.json())\r\n        // .then(labels => {\r\n        //   let label_stack_local =  this.state.label_stack.slice()\r\n        //   label_stack_local[0] = labels\r\n        //   this.setState({\r\n        //     labels: labels,\r\n        //     label_stack: label_stack_local\r\n        //   })\r\n        // })\r\n        // COLOR\r\n        fetch(`${process.env.PUBLIC_URL}/${color_array_string}0.json`)\r\n        .then(response => response.json())\r\n        .then(color => {\r\n          let color_array_stack_local =  this.state.color_array_stack.slice()\r\n          color_array_stack_local[0] = color\r\n          this.setState({\r\n            color_array: color,\r\n            color_array_stack: color_array_stack_local\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    console.log(this.state)\r\n    return this.state.embeddings && this.state.labels ? (\r\n      <Layout\r\n        {...this.state}\r\n      />\r\n    ) : (\r\n      <div style={{ padding: '1rem' }}>Loading data...</div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Data\r\n","import React, { Component } from 'react'\nimport './App.css'\nimport Data from './Data'\n\nclass App extends Component {\n  render() {\n    return <Data />\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}